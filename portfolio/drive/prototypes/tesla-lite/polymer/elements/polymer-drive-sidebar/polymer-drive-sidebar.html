<link rel="import" href="../../../bower_components/polymer/polymer.html">
<polymer-element name="polymer-drive-sidebar">
<template>
  <link rel="stylesheet" href="polymer-drive-sidebar.css">
  <div id="buttons">
    <button id="upload" class="red-action-button">Upload</button>
    <button id="create" class="red-action-button">+</button>
  </div>
  <ul>
  	<template repeat="{{ item in contents }}">
      <li><polymer-drive-sidebar-item item="{{item}}" siblings="{{contents}}" parentitem="{{this}}" hasFoldersFlag="true"></polymer-drive-sidebar-item></li>
    </template>
  </ul>
    <ul class="fixed-trash" id="fixedTrash">
      <li><polymer-drive-sidebar-item item="{{contents[4]}}"></polymer-drive-sidebar-item></li>
    </ul>
  <div class="space-indicator">17.48 GB (1%) of 1.41 TB used
    <div>Manage</div></div>
</template>
<script>
  (function() {
    Polymer('polymer-drive-sidebar', {
      hasFoldersFlag : true,
      ready: function() { 
      	this.super();
        this.contents = [
        { title : 'My Drive', icon : 'folder', selectedInSidebar : true, contents : dataHandler.root.contents, type : 'folder', hasFoldersFlag :true }, 
        { title : 'Incoming', icon : 'shared', contents : [], type: 'folder'}, 
        { title : 'Starred', icon : 'starred', contents : []},
        { title : 'Recent', icon : 'recent', contents : []},
        { title : 'Trash', icon : 'trashed', contents : []}];
      },
      openSidebar: function(bool) {
        console.log(this);
        this.shadowRoot.getElementsByTagName('polymer-drive-sidebar-item')[0].hideChildren = !bool;
      },
      deselectAll : function() {
        if (this) {
          this.deselectChildren(this);
        }
      },
      deselectChildren : function(folder) {
        for (i in folder.contents) {
          var cItem = folder.contents[i];
          cItem.selectedInSidebar = false;
          if (cItem.type == 'folder') {
            this.deselectChildren(cItem);
          }
        }
      }
    });
  })();
</script>
</polymer-element>