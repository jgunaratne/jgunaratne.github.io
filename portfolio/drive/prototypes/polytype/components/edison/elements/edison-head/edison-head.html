<link rel="import" href="/polymer/polymer.html">

<polymer-element 
	name="edison-head" 
	attributes="shell theme"
	on-click="onClick">
	
<template>
	<style>
	.menubar {
		background-color: #DDD;
		color: #fff;
		width: 100%;
		height: 48px;
		line-height: 48px;
		position: relative;
	}
	.menubar.dark {
		background-color: #252525;
	}
	h1 {
		font-size: 18px;
		margin: 0;
		line-height: 48px;
		font-weight: normal;
		font-family: RobotoLight;
		position: relative;
		display: inline-block;
	}
	.btnset {
		position: absolute;
		right: 0;
		top: 0;
	}
	.drive-logo {
		background-image: url(img/drive-logo.svg);
		background-size: cover;
		background-position: center;
		width: 32px;
		height: 32px;
		margin: 8px 8px 0 24px;
		float: left;
	}
	.drive-btn-menu {
		cursor: pointer;
	}
	.arrow {
		height: 16px;
		width: 16px;
		background-color: #fff;
		-webkit-mask-image: url(img/arrow.svg);
		-webkit-mask-position: center;
		position: absolute;
		right: -20px;
		top: 16px;
	}
	</style>
	<div class="menubar {{theme}}" id="ui-menubar">
		<edison-menu-button shell="{{shell}}"></edison-menu-button>
		<div id="driveBtn">
			<div class="drive-logo drive-btn-menu"></div>
			<h1 class="drive-btn-menu">My Drive<div class="arrow drive-btn-menu"></div></h1>
		</div>
		<edison-menu id="driveMenu" items="{{['My Drive', 'Incoming', 'Starred', 'Recent', 'Trash']}}" class="drive-menu"></edison-menu>
		<edison-menu id="sortMenu" items="{{['Last edited by me','Last modified','Last opened by me','Title']}}" class="sort-menu"></edison-menu>
		<div class="btnset">
			<edison-head-button icon="grid" shell="{{shell}}"></edison-head-button>
			<edison-head-button icon="sort" class="sort-btn-menu"></edison-head-button>
			<edison-head-button icon="search"></edison-head-button>
		</div>
	</div>
</template>
<script>
	(function() {
		Polymer('edison-head', {
			ready: function() {
				
			},
			onClick: function(e) {
				if (e.srcElement.classList.contains('drive-btn-menu')) {
					var driveMenu = document.getElementById('driveMenu');
					driveMenu.classList.toggle('show');
				}
				e.stopPropagation();
				
			}
		});
	})();
</script>
</polymer-element>

<!-- FUNCTIONAL BUTTONS -->

<polymer-element 
	name="edison-head-button" 
	on-click="onClick" 
	attributes="icon shell">
	
<template>
	
	<style>
		.head-btn {
			width: 48px;
			height: 48px;
			float: left;
		}
		.head-btn .icon {
			width: 48px;
			height: 48px;
			opacity: 0.8;
		}
		.head-btn .icon:active {
			background: rgba(255,255,255,0.1);
		}
		.head-btn .grid {
			background-image: url(img/grid.svg);
		}
		.head-btn .sort {
			background-image: url(img/sort.svg);
		}
		.head-btn .search {
			background-image: url(img/search.svg);
		}
	</style>
	
	<div class="head-btn">
		<div class="icon {{icon}}"></div>
	</div>
	
</template>

<script>
	(function() {
		Polymer('edison-head-button', {
			ready: function() {

			},
			onClick: function() {
				
				var attr = this
					.impl.children[0]
					.children[0].classList[1]
				
				if (attr == 'grid') {

					var edisonList = this.shell.list;

					var viewType = edisonList.getAttribute('view');
					if (viewType == 'list') {
						edisonList.setAttribute('view', 'grid');
					} else {
						edisonList.setAttribute('view', 'list');
					}
				} else if (attr == 'sort') {
					var sortMenu = document.getElementById('sortMenu');
					sortMenu.classList.toggle('show');
				}
			}
		});
	})();
</script>

</polymer-element>

<!-- SIDEBAR TOGGLE BUTTON -->

<polymer-element 
	name="edison-menu-button" 
	on-click="onClick" 
	attributes="shell">
	
<template>
	<style>
		.menu-btn {
			width: 48px;
			height: 48px;
		}
		.icon {
			width: 48px;
			height: 48px;
			background: #fff;
			-webkit-mask-size: cover !important;
			-webkit-mask-position: center;
		}
		.menu .icon {
			-webkit-mask-image: url(img/menu.svg);
		}
		.menu {
			position: absolute;
			left: -20px;
			top: -2px;
			float: left;
		}
	</style>
	<div class="menu-btn menu">
		<div class="icon"></div>
	</div>
</template>
<script>
	(function() {
		Polymer('edison-menu-button', {
			ready: function() {

			},
			onClick: function() {
				if (this.shell.sidebaropen == 'true') {
					this.shell.sidebaropen = 'false';
				} else {
					this.shell.sidebaropen = 'true';
				}
			}
		});
	})();
</script>
</polymer-element>


<polymer-element 
	name="edison-menu" 
	on-click="onClick" 
	attributes="shell items">
	
<template>
	<style>
	:host {
		position: absolute;
		background-color: rgba(37,37,37,.9);
		z-index: 100;
		height: 0;
		overflow: hidden;
		-webkit-transition: all .2s;
	}
	:host.drive-menu {
		top: 48px;
		left: 34px;
	}
	:host.sort-menu {
		top: 48px;
		right: 0px;
	}
	:host.sort-menu.show {
		height: 192px;
	}
	ul {

	}
	ul, li {
		margin: 0;
		padding: 0;
		list-style: none;
		font-size: 16px;
	}
	li {
		padding: 0 30px;
		min-width: 110px;
	}
	li:hover {
		background-color: rgba(255,255,255,.1);
		cursor: pointer;
	}
	:host.show {
		padding: 8px 0;
		height: 240px;
		-webkit-transition: all .2s;
	}
	</style>
	<ul>
	<template repeat="{{item in items}}">
		<li>{{item}}</li>
	</template>
	</ul>
</template>
<script>
	(function() {
		Polymer('edison-menu', {
			ready: function() {

			},
			onClick: function(e) {
				this.classList.toggle('show');
				e.stopPropagation();
			}
		});
	})();
</script>
</polymer-element>